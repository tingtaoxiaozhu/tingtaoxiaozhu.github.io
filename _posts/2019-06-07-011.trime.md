---
layout: post
mathjax: false
title: 添加QQ群打开链接
categories: [Input Method]
excerpt: 给同文98版五笔添加入群引导
---

#### 为同文添加「98五笔交流群」链接

> trime/app/src/main/res/xml/prefs.xml

下面，有一些打开 QQ 群的链接，它是使用了 QQ 的 公共 API

观察，这一部分都是相同的：

> mqqopensdkapi://bizAgent/qm/qr?url=http%3A%2F%2Fqm.qq.com%2Fcgi-bin%2Fqm%2Fqr%3Ffrom%3Dapp%26p%3Dandroid%26k%3D

所以，在网上搜了一下生成后面转跳群号专用 Key 的在线工具，生成了 98五笔交流群 需要的 Key

> wSzR_7XoJ_c3yYFyKKNzEsx0Nkv_oIib

两部分拼到一起，就成了：

> mqqopensdkapi://bizAgent/qm/qr?url=http%3A%2F%2Fqm.qq.com%2Fcgi-bin%2Fqm%2Fqr%3Ffrom%3Dapp%26p%3Dandroid%26k%3DwSzR_7XoJ_c3yYFyKKNzEsx0Nkv_oIib

在 「pre_rime_qq」字段下面，仿写：

```
        <Preference android:key="pref_98wb_qq" android:title="@string/pref_98wb_qq"
                    android:summary="@string/pref_rime_98wb_summary">
            <intent android:action="android.intent.action.VIEW"
                    android:data="mqqopensdkapi://bizAgent/qm/qr?url=http%3A%2F%2Fqm.qq.com%2Fcgi-bin%2Fqm%2Fqr%3Ffrom%3Dapp%26p%3Dandroid%26k%3DwSzR_7XoJ_c3yYFyKKNzEsx0Nkv_oIib" />
        </Preference>

```
保持相同的缩进，即完成第一部分。接下来，需要对有「@string」修饰到的「pref_98wb_qq」与「pref_rime_98wb_summary」添加字符串定义：

> trime/app/src/main/res 

下面，搜一搜「string.xml」

```
$ find -name 'strings.xml'
./values-zh-rCN/strings.xml
./values/strings.xml
./values-zh-rTW/strings.xml
```
可以看到，是「values」，「values-zh-rTW」，「values-zh-rCN」三个文件夹下面。
仿着其中的 「pref_rime_qq」，添加「pref_98wb_qq」：

```
    <string name="pref_help">Help</string>
    <string name="pref_wiki">Wiki</string>
    <string name="pref_issues">Report Issues</string>
    <string name="pref_trime_qq">Trime QQ Group</string>
    <string name="pref_trime_qq2">Trime QQ Group 2</string>
    <string name="pref_rime_qq">Rime QQ Group</string>
    <string name="pref_98wb_qq">Rime 98wb Group</string>
```
如法炮制另外两份不同语言的「string.xml」。

除此之外，在「values」下面，除了一份「string.xml」外，还有一份「donottranslate.xml」，它里面存着关于 QQ 群号的数值串「pref_rime_\*_summary」。

同样仿写一下：

```
    <string name="pref_trime_qq_summary">480159874</string>
    <string name="pref_trime_qq2_summary">458845988</string>
    <string name="pref_rime_qq_summary">77608640</string>
    <string name="pref_rime_98wb_summary">547820540</string>
```

于是，就完成了对 QQ 群支持的添加。

