<!DOCTYPE html>

<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<script src="https://cdn1.lncld.net/static/js/av-min-1.5.0.js"></script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> 
<script src="https://jerryz.sgp1.cdn.digitaloceanspaces.com/lib/hit-kounter/hit-kounter-lc-0.3.0.js"></script>
<link rel="stylesheet" href="/assets/css/gruvbox.dark.css">
<title>添加QQ群打开链接</title>

        
        <link rel="stylesheet" href="http://localhost:4000/styles/font.css">
        <link rel="stylesheet" media="screen and (min-width: 600px)" href="http://localhost:4000/styles/post.css">
        <link rel="stylesheet" media="screen and (max-width: 600px)" href="http://localhost:4000/styles/post_mobile.css">
        <link rel="stylesheet" media="screen and (min-width: 600px)" href="http://localhost:4000/styles/navigatebar.css">
        <link rel="stylesheet" media="screen and (max-width: 600px)" href="http://localhost:4000/styles/navigatebar_mobile.css">
        <link rel="stylesheet" href="http://localhost:4000/theme/highlight.css">
    </head>
    <body>
        <div class="navigatebar">
    <div class="navigatebar-button navigatebar-mine">
        <a href="http://localhost:4000/index.html">乌臼树</a>
    </div>
    <div class="navigatebar-slogan">
        「日暮伯劳飞，风吹乌臼树」
    </div>

    <div class="navigatebar-button">
        <a href="http://localhost:4000/tags.html">Tags</a>
    </div>

    <div class="navigatebar-button navigatebar-about">
        <a href="http://localhost:4000/about.html">About</a>
    </div>
</div>

        <div class="content-area">
            <div class="title">
                添加QQ群打开链接
            </div>
            <div class="category-area">
                「
                <a href="http://localhost:4000/tags.html#Input Method">
                    <div class="category">
                        Input Method
                    </div>
                </a>
                」
            </div>
            <div class="char-counter">
                浏览<span data-hk-page="current"> - </span>次 字数1945 2019-06-07
            </div>
            <div class="content">
                <h4 id="为同文添加98五笔交流群链接">为同文添加「98五笔交流群」链接</h4>

<blockquote>
  <p>trime/app/src/main/res/xml/prefs.xml</p>
</blockquote>

<p>下面，有一些打开 QQ 群的链接，它是使用了 QQ 的 公共 API</p>

<p>观察，这一部分都是相同的：</p>

<blockquote>
  <p>mqqopensdkapi://bizAgent/qm/qr?url=http%3A%2F%2Fqm.qq.com%2Fcgi-bin%2Fqm%2Fqr%3Ffrom%3Dapp%26p%3Dandroid%26k%3D</p>
</blockquote>

<p>所以，在网上搜了一下生成后面转跳群号专用 Key 的在线工具，生成了 98五笔交流群 需要的 Key</p>

<blockquote>
  <p>wSzR_7XoJ_c3yYFyKKNzEsx0Nkv_oIib</p>
</blockquote>

<p>两部分拼到一起，就成了：</p>

<blockquote>
  <p>mqqopensdkapi://bizAgent/qm/qr?url=http%3A%2F%2Fqm.qq.com%2Fcgi-bin%2Fqm%2Fqr%3Ffrom%3Dapp%26p%3Dandroid%26k%3DwSzR_7XoJ_c3yYFyKKNzEsx0Nkv_oIib</p>
</blockquote>

<p>在 「pre_rime_qq」字段下面，仿写：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        &lt;Preference android:key="pref_98wb_qq" android:title="@string/pref_98wb_qq"
                    android:summary="@string/pref_rime_98wb_summary"&gt;
            &lt;intent android:action="android.intent.action.VIEW"
                    android:data="mqqopensdkapi://bizAgent/qm/qr?url=http%3A%2F%2Fqm.qq.com%2Fcgi-bin%2Fqm%2Fqr%3Ffrom%3Dapp%26p%3Dandroid%26k%3DwSzR_7XoJ_c3yYFyKKNzEsx0Nkv_oIib" /&gt;
        &lt;/Preference&gt;

</code></pre></div></div>
<p>保持相同的缩进，即完成第一部分。接下来，需要对有「@string」修饰到的「pref_98wb_qq」与「pref_rime_98wb_summary」添加字符串定义：</p>

<blockquote>
  <p>trime/app/src/main/res</p>
</blockquote>

<p>下面，搜一搜「string.xml」</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ find -name 'strings.xml'
./values-zh-rCN/strings.xml
./values/strings.xml
./values-zh-rTW/strings.xml
</code></pre></div></div>
<p>可以看到，是「values」，「values-zh-rTW」，「values-zh-rCN」三个文件夹下面。
仿着其中的 「pref_rime_qq」，添加「pref_98wb_qq」：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    &lt;string name="pref_help"&gt;Help&lt;/string&gt;
    &lt;string name="pref_wiki"&gt;Wiki&lt;/string&gt;
    &lt;string name="pref_issues"&gt;Report Issues&lt;/string&gt;
    &lt;string name="pref_trime_qq"&gt;Trime QQ Group&lt;/string&gt;
    &lt;string name="pref_trime_qq2"&gt;Trime QQ Group 2&lt;/string&gt;
    &lt;string name="pref_rime_qq"&gt;Rime QQ Group&lt;/string&gt;
    &lt;string name="pref_98wb_qq"&gt;Rime 98wb Group&lt;/string&gt;
</code></pre></div></div>
<p>如法炮制另外两份不同语言的「string.xml」。</p>

<p>除此之外，在「values」下面，除了一份「string.xml」外，还有一份「donottranslate.xml」，它里面存着关于 QQ 群号的数值串「pref_rime_*_summary」。</p>

<p>同样仿写一下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    &lt;string name="pref_trime_qq_summary"&gt;480159874&lt;/string&gt;
    &lt;string name="pref_trime_qq2_summary"&gt;458845988&lt;/string&gt;
    &lt;string name="pref_rime_qq_summary"&gt;77608640&lt;/string&gt;
    &lt;string name="pref_rime_98wb_summary"&gt;547820540&lt;/string&gt;
</code></pre></div></div>

<p>于是，就完成了对 QQ 群支持的添加。</p>


            </div>
        </div>
        <div class="nickname">
            乌臼树
        </div>

    </body>
</html>
